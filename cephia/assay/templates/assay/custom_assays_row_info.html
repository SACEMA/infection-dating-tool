{% extends "cephia/row_info_base.html" %}
{% load bootstrap3 %}
{% load el_pagination_tags %}

{% block filter_col_a %}
  {% bootstrap_field filter_form.state %}
{% endblock %}

{% block filter_col_b %}
  {% bootstrap_field filter_form.has_comment %}
{% endblock %}

{% block filename %}{{file}}{% endblock %}
{% block table_header %}
  <thead>
    <th>specimen_label</th>
    <th>assay</th>
    <th>test_date</th>
    <th>operator</th>
    <th>assay_kit_lot</th>
    <th>plate_identifier</th>
    <th>test_mode</th>
    <th>specimen_purpose</th>
    <th>result_classification</th>
    <th>result_quantitative</th>
    <th>state</th>
    <th>Message</th>
  </thead>
{% endblock %}

{% block table_body %}
  {% paginate rows %}
  {% show_pages %}
  <tbody>
    {% for row in rows %}
      <tr>
        <td>{{row.specimen_label}}</td>
        {% if row.assay %}
          <td>{{row.assay}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.test_date %}
          <td>{{row.test_date}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.operator %}
          <td>{{row.operator}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.assay_kit_lot %}
          <td>{{row.assay_kit_lot}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.plate_identifier %}
          <td>{{row.plate_identifier}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.test_mode %}
          <td>{{row.test_mode}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.specimen_purpose %}
          <td>{{row.specimen_purpose}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.result_classification %}
          <td>{{row.result_classification}}</td>
        {% else %}
          <td></td>
        {% endif %}
        {% if row.result_quantitative %}
          <td>{{row.result_quantitative}}</td>
        {% else %}
          <td></td>
        {% endif %}
        <td>{{row.state}}</td>
        <td><pre>{{row.error_message}}
          {{row.error_message}}</pre></td>
        <td data-row-id="{{row.id}}" data-file-id="{{row.fileinfo.id}}" data-file-type="{{row.fileinfo.file_type}}">
          {% if row.state == 'error' %}
            <button class="btn btn-success btn-comment-modal">
              {% bootstrap_icon "comment" %}
            </button>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
{% endblock %}
