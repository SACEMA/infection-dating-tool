# -*- coding: utf-8 -*-
# Generated by Django 1.9.6 on 2016-10-07 10:15
from __future__ import unicode_literals

from django.db import migrations, models

def set_visits(apps, schema):

    result_models = [
        'LagMaximResult',
        'ArchitectUnmodifiedResult',
        'ArchitectAvidityResult',
        'BioRadAvidityCDCResult',
        'BioRadAvidityJHUResult',
        'BioRadAvidityGlasgowResult',
        'VitrosAvidityResult',
        'LSVitrosDiluentResult',
        'LSVitrosPlasmaResult',
        'GeeniusResult',
        'BEDResult',
        'LuminexCDCResult',
        'IDEV3Result',
        'BioPlexDukeResult',
        'ISGlobalResult',
    ]

    for model_name in result_models:
        ResultModel = apps.get_model("assay", model_name)
        for result in ResultModel.objects.filter(specimen__isnull=False):
            result.visit = result.specimen.visit
            result.save()

class Migration(migrations.Migration):

    dependencies = [
        ('assay', '0018_auto_20161007_1215'),
    ]

    operations = [
        migrations.RunPython(set_visits, migrations.RunPython.noop)
    ]
