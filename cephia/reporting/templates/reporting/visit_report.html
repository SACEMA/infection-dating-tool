{% extends "cephia/report_base.html" %}

{% load reporting_tags %}
{% load bootstrap3 %}
{% load endless %}

{% block site-title %} Visit Report {% endblock %}

{% block page_content %}

<i>Showing first {{num_rows}} rows only </i>

<a class="btn btn-primary" target="_blank" href="{% url 'reporting:visit_report' %}?csv=1">Download</a>

<a href="#" class="btn btn-primary show-specimen">
  Show specimen
</a>

<form id="specimen-form" role="form" method="POST">
  <table class="table-striped table table-hover" style="overflow:auto;">
    <thead>
      {% for header in report.headers %}
      <th>{{header}}</th>
      {% endfor %}
    </thead>
    <tbody>
      {% for row in report.rows %}
      <tr>
        {% for header in report.headers %}
        <td class="{{header}}">
          {% if header == 'VisitId' or header == 'SubjectId' %}
          <input name="{{header}}" type="checkbox" class="{{header}}-checkbox" value="{{ row|get_item:header|default:'' }}">
          {% endif %}
          {{ row|get_item:header|default:"" }}
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</form>

<div class="specimen-modal">
  <div class="container">
  <div class="modal fade" id="specimenModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Specimens for selected visits/subjects</h4>
        </div>
        <div class="modal-body specimens-modal-body">

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary export-specimen">Export to CSV</button>
        </div>
      </div>
    </div>
  </div>
</div>


{% endblock %}
