{% extends 'outside_eddi/base.html' %}
{% load bootstrap3 %}

{% block extra_js%}
  <script src="http://malsup.github.com/jquery.form.js"></script>
{% endblock %}

{% block content %}
  <div class="container">

    <table class="table table-condensed table-striped">
      <thead>
        <tr>
          <th>Tests</th>
          <th>Details</th>
          <th>Properties</th>
        </tr>
      </thead>
      <tbody>
        {% for test in tests %}
          <tr>
            <td>
              {{ test.name }}
            </td>
            <td>
              {{ test.description }}
            </td>
            <td>
              <a class="btn btn-primary js-show-properties" data-toggle="modal" data-target="#modal" href="{% url 'outside_eddi:test_properties' test.id %}">Properties</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="modal fade" id="modal"></div>
    <script>
     $('.js-show-properties').click(function(event) {
         event.preventDefault();
         url = $(this).attr('href');

         $.get(url).done(function(html) {
             $('#modal').html(html);
             $('#modal').modal();
         });
     });
     /* $('#modal').on('show.bs.modal', function (event) {
      *     var modal = $(this)
      *     $.ajax({
      *         url: 
      *         context: document.body
      *     }).done(function(response) {
      *         modal.html(response);
      *     });
      * })*/
    </script>
    
  </div>
{% endblock %}
